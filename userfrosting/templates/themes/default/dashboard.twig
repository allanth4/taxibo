{% extends "layouts/layout-dashboard.twig" %}
{% set page_group = "dashboard" %}

{# Set page properties (page.*) here. #}
{% block page %}
    {# By putting this in a special block, we ensure that it will be set AFTER the default values are set in the parent template, 
    but BEFORE the page itself is rendered. #}    
    {% set page = page | merge({
        "title"       : "Dashboard",
        "description" : "Your user dashboard."
    }) %}
    {{ parent() }}
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Dashboard</h1>
    </div>
    <!-- /.col-lg-12 -->
</div>
<!-- /.row -->
<!-- div class="row">
    <div class="col-lg-12">            
        <div class="alert alert-success alert-dismissable">
          <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
          Welcome to {{site.site_title}}!  The dashboard and admin account features are based on the SB Admin 2 template by <a class="alert-link" href="http://startbootstrap.com">Start Bootstrap</a>. Other key frameworks and plugins used in this system are:
          <br><a class="alert-link" href='http://www.slimframework.com/'>Slim</a>: a microframework for PHP
          <br><a class="alert-link" href='http://twig.sensiolabs.org/'>Twig</a>: The flexible, fast, and secure
template engine for PHP
          <br><a class="alert-link" href='http://http://laravel.com/docs/5.1/eloquent/'>Eloquent</a>: Laravel's ORM
          <br><a class="alert-link" href='http://http://jquery.com/'>jQuery 1.11.2</a>
          <br><a class="alert-link" href='http://getbootstrap.com/'>Twitter Bootstrap 3.3.2</a>
          <br><a class="alert-link" href='http://handlebarsjs.com/'>Handlebars</a>: Minimal templating on steroids
          <br><a class="alert-link" href='http://fontawesome.io/'>Font Awesome</a>
          <br><a class="alert-link" href='http://jqueryvalidation.org'>jQuery Validation</a>: Form validation with jQuery
          <br><a class="alert-link" href='http://tablesorter.com/docs/'>Tablesorter 2.23.4</a>: sortable, searchable tables
          <br><a class="alert-link" href='http://momentjs.com/'>Moment.js</a>: Parse, validate, manipulate, and display dates in JavaScript
          <br>The <a class="alert-link" href='http://www.bootstrap-switch.org/'>Bootstrap Switch</a> component by Mattia Larentis,Peter Stein, and Emanuele Marchi
          <br><a class="alert-link" href="https://select2.github.io/">Select2</a>: the jQuery replacement for search boxes
          <br>All components are copyright of their respective creators.
        </div>
    </div>
</div -->
<div class="row">
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-primary">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-taxi fa-4x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">{{futureNewBookingsCount|e}}</div>
                        <div>Nya bokningar</div>
                    </div>
                </div>
            </div>
            <!-- a href="#">
                <div class="panel-footer">
                    <span class="pull-left">View Details</span>
                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a -->
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-green">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-taxi fa-4x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">{{futureAcceptedBookingsCount|e}}</div>
                        <div>Accepterade bokn.</div>
                    </div>
                </div>
            </div>
            <!-- a href="#">
                <div class="panel-footer">
                    <span class="pull-left">View Details</span>
                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a -->
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-red">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-taxi fa-4x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">{{futureRejectedBookingsCount|e}}</div>
                        <div>Avvisade bokningar</div>
                    </div>
                </div>
            </div>
            <!-- a href="#">
                <div class="panel-footer">
                    <span class="pull-left">View Details</span>
                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a -->
        </div>
    </div>
    <div class="col-lg-3 col-md-6">
        <div class="panel panel-gray">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-xs-3">
                        <i class="fa fa-taxi fa-4x"></i>
                    </div>
                    <div class="col-xs-9 text-right">
                        <div class="huge">{{futureTotalBookingsCount|e}}</div>
                        <div>Bokningar</div>
                    </div>
                </div>
            </div>
            <!-- a href="#">
                <div class="panel-footer">
                    <span class="pull-left">View Details</span>
                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                    <div class="clearfix"></div>
                </div>
            </a -->
        </div>
    </div>
</div>
<!-- /.row -->
<div class="row">
    <div class="col-lg-8">
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Bokningar {{chartTitle|e}}
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <div id="morris-area-chart"></div>
            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
        

        <!-- div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Bar Chart Example
                <div class="pull-right">
                    <div class="btn-group">
                        <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                            Actions
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu pull-right" role="menu">
                            <li><a href="#">Action</a>
                            </li>
                            <li><a href="#">Another action</a>
                            </li>
                            <li><a href="#">Something else here</a>
                            </li>
                            <li class="divider"></li>
                            <li><a href="#">Separated link</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        
            <div class="panel-body">
                <div class="row">
                    <div class="col-lg-4">
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover table-striped">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Date</th>
                                        <th>Time</th>
                                        <th>Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>3326</td>
                                        <td>10/21/2013</td>
                                        <td>3:29 PM</td>
                                        <td>$321.33</td>
                                    </tr>
                                    <tr>
                                        <td>3325</td>
                                        <td>10/21/2013</td>
                                        <td>3:20 PM</td>
                                        <td>$234.34</td>
                                    </tr>
                                    <tr>
                                        <td>3324</td>
                                        <td>10/21/2013</td>
                                        <td>3:03 PM</td>
                                        <td>$724.17</td>
                                    </tr>
                                    <tr>
                                        <td>3323</td>
                                        <td>10/21/2013</td>
                                        <td>3:00 PM</td>
                                        <td>$23.71</td>
                                    </tr>
                                    <tr>
                                        <td>3322</td>
                                        <td>10/21/2013</td>
                                        <td>2:49 PM</td>
                                        <td>$8345.23</td>
                                    </tr>
                                    <tr>
                                        <td>3321</td>
                                        <td>10/21/2013</td>
                                        <td>2:23 PM</td>
                                        <td>$245.12</td>
                                    </tr>
                                    <tr>
                                        <td>3320</td>
                                        <td>10/21/2013</td>
                                        <td>2:15 PM</td>
                                        <td>$5663.54</td>
                                    </tr>
                                    <tr>
                                        <td>3319</td>
                                        <td>10/21/2013</td>
                                        <td>2:13 PM</td>
                                        <td>$943.45</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
        
                    </div>
        
                    <div class="col-lg-8">
                        <div id="morris-bar-chart"></div>
                    </div>
                </div>
            </div>
        </div -->
        <!-- /.panel -->
        
    </div>
    <!-- /.col-lg-8 -->
    {% if nextBooking %} 
    <div class="col-lg-4">
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bell fa-fw"></i> Nästa bokning
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <div class="list-group">
                    <a href="#" class="list-group-item">
                        <i class="fa fa-sign-out fa-fw"></i> {{nextBooking.origin|e}}
                        <span class="pull-right text-muted small"><em>Från</em>
                        </span>
                    </a>
                    <a href="#" class="list-group-item">
                        <i class="fa fa-sign-in fa-fw"></i> {{nextBooking.destination|e}}
                        <span class="pull-right text-muted small"><em>Til</em>
                        </span>
                    </a>
                    <a href="#" class="list-group-item">
                        <i class="fa fa-calendar fa-fw"></i> {{nextBookingStartDate|e}}
                        <span class="pull-right text-muted small"><em>Avrese</em>
                        </span>
                    </a>
                    <a href="#" class="list-group-item">
                        <i class="fa fa-clock-o fa-fw"></i> {{nextBookingStartTime|e}}
                        <span class="pull-right text-muted small"><em>Tid</em>
                        </span>
                    </a>
                    <a href="#" class="list-group-item">
                        <i class="fa fa-user fa-person fa-fw"></i> {{nextBooking.name|e}}
                        <span class="pull-right text-muted small"><em>Namn</em>
                        </span>
                    </a>
                    <a href="#" class="list-group-item">
                        <i class="fa fa-phone fa-fw"></i> {{nextBooking.phone|e}}
                        <span class="pull-right text-muted small"><em>Telefon</em>
                        </span>
                    </a>
                    <a href="#" class="list-group-item">
                        <i class="fa fa-money fa-fw"></i> {{nextBooking.price}}:-
                        <span class="pull-right text-muted small"><em>Pris</em>
                        </span>
                    </a>
                </div>

            </div>
            <!-- /.panel-body -->
        </div>

    </div>
    {% endif %} 
    <!-- /.col-lg-4 -->
</div>
<!-- /.row -->
{% endblock %}
{% block page_scripts %}
    <script src="{{site.uri.js}}/morris-data.js"></script>
    <script src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>


    <script type="text/javascript">

    $(function() {

        Morris.Area({
        element: 'morris-area-chart',
        data: {{chartJson|raw}},
        xkey: 'period',
        ykeys: ['new', 'accepted', 'rejected'],
        labels: ['Nya', 'Accpeterade', 'Avvisade'],
        pointSize: 2,
        hideHover: 'auto',
        resize: true,
        lineColors: ['#337ab7' ,'#5cb85c', '#d9534f']
    });
    });
    </script>
{% endblock %}